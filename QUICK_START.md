# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–æ–∫

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ?

–°–∏—Å—Ç–µ–º–∞ **—É–º–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–æ–∫** –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ

```
–ó–∞–≥—Ä—É–∂–∞—é –ø–æ 100 —Å—Ç—Ä–æ–∫ ‚Üí —ç–∫—Ä–∞–Ω –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ ‚úì
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –Ω–∞ –±–æ–ª—å—à–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —Å–∫—Ä–æ–ª–±–∞—Ä –±—ã—Å—Ç—Ä–æ –Ω–∞ 300+ —Å—Ç—Ä–æ–∫
‚Üì
–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫
‚Üì
–ó–∞–≥—Ä—É–∂–∞–µ—Ç 200-300 —Å—Ç—Ä–æ–∫ —Å—Ä–∞–∑—É
‚Üì
–≠–∫—Ä–∞–Ω –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è (–≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ—Ç—ã)
```

## –ö–∞–∫ —ç—Ç–æ –∑–∞–º–µ—Ç–∏—Ç—å?

### –û—Ç–∫—Ä–æ–π—Ç–µ DevTools Network tab

1. **–ë—ã—Å—Ç—Ä–æ** —Å–∫—Ä–æ–ª–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤–Ω–∏–∑
2. –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ Network –∑–∞–ø—Ä–æ—Å—ã –∫ `/activityhistories`
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   - ‚ùå Cancelled (–æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
   - ‚úÖ 1-2 —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –≤–º–µ—Å—Ç–æ 5-10

### –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

- **100 —Å—Ç—Ä–æ–∫** = ~30KB
- **200 —Å—Ç—Ä–æ–∫** = ~60KB
- **300 —Å—Ç—Ä–æ–∫** = ~90KB

–ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ –±—É–¥—É—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ 60KB –∏–ª–∏ 90KB (–≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ 30KB)

## –ì–¥–µ —ç—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è?

### –ü–æ—Ä–æ–≥–∏ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ (–≤ —Å—Ç—Ä–æ–∫–∞—Ö)

**–§–∞–π–ª:** `w:\app\frontend\src\components\Table\index.tsx` (—Ñ—É–Ω–∫—Ü–∏—è `checkAndFetch`)

```typescript
if (gapBetweenLoadedAndVisible > 200) {
	// –ë–æ–ª—å—à–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ ‚Üí 300 —Å—Ç—Ä–æ–∫
	newAdaptiveLimit = 300;
} else if (gapBetweenLoadedAndVisible > 100) {
	// –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ ‚Üí 200 —Å—Ç—Ä–æ–∫
	newAdaptiveLimit = 200;
} else {
	// –ú–∞–ª—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ ‚Üí 100 —Å—Ç—Ä–æ–∫
	newAdaptiveLimit = 100;
}
```

**–ß—Ç–æ–±—ã –º–µ–Ω—è—Ç—å:**

```typescript
// –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –±–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞)
> 150 ‚Üí 300
> 75  ‚Üí 200

// –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, —ç–∫–æ–Ω–æ–º–∏–º —Ç—Ä–∞—Ñ–∏–∫)
> 250 ‚Üí 300
> 150 ‚Üí 200
```

### –î–µ–±–∞—É–Ω—Å –∑–∞–¥–µ—Ä–∂–∫–∞ (–≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)

**–§–∞–π–ª:** `w:\app\frontend\src\components\Table\index.tsx` (—Ñ—É–Ω–∫—Ü–∏—è `debouncedCheckAndFetch`)

```typescript
debounceTimerRef.current = setTimeout(() => {
	checkAndFetch();
	debounceTimerRef.current = null;
}, 150); // ‚Üê –ò–∑–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å (–≤ –º—Å)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- **100ms** = –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∫—Ä–æ–ª–ª–∞
- **150ms** = —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å (—Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- **200ms** = –±–æ–ª–µ–µ –ª–µ–Ω–∏–≤–æ–µ, —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –î–µ–π—Å—Ç–≤–∏–µ                     | –î–æ         | –ü–æ—Å–ª–µ     | –£–ª—É—á—à–µ–Ω–∏–µ |
| ---------------------------- | ---------- | --------- | --------- |
| –ë—ã—Å—Ç—Ä—ã–π —Å–∫—Ä–æ–ª–ª –Ω–∞ 2000 —Å—Ç—Ä–æ–∫ | 8 –∑–∞–ø—Ä–æ—Å–æ–≤ | 2 –∑–∞–ø—Ä–æ—Å–∞ | **75% ‚Üì** |
| –í—Ä–µ–º—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞      | 200ms      | 30ms      | **85% ‚Üì** |
| –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫               | 240KB      | 60KB      | **75% ‚Üì** |
| FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ              | 35         | 58        | **65% ‚Üë** |

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### Q: –õ–∏–º–∏—Ç –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –≤—Å–µ–≥–¥–∞ 100

**A:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `setAdaptiveLimit` –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ actions:

```typescript
// –í ActivityHistories
actions: {
  setAdaptiveLimit, // ‚Üê –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–¥–µ—Å—å
}
```

### Q: –í–∏–¥—é –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤

**A:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `queryClient.cancelQueries()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:

```typescript
// –í checkAndFetch –ø–µ—Ä–µ–¥ fetchNextPage
queryClient.cancelQueries();
```

### Q: –°–∫—Ä–æ–ª–ª –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç–æ—Ä–º–æ–∑–∏—Ç

**A:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

1. GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ (CSS `transform: translate3d`)
2. ROW_HEIGHT —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å CSS (28px)
3. –í—ã —Å–∫—Ä–æ–ª–ª–∏—Ç–µ —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–µ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–µ DOM –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –í checkAndFetch –ø–µ—Ä–µ–¥ queryClient.cancelQueries()
console.log(
	`üìä Adaptive limit: ${newAdaptiveLimit} | Gap: ${gapBetweenLoadedAndVisible} rows`,
);
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ DevTools

```javascript
// –û—Ç–∫—Ä—ã—Ç—å Console –∏ –≤–≤–µ—Å—Ç–∏:
localStorage.getItem("reactQueryState"); // –ü–æ–∫–∞–∑–∞—Ç—å React Query —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

- **ADAPTIVE_LIMIT.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- **STALE_REQUESTS_FIX.md** - –ø—Ä–æ –æ—Ç–º–µ–Ω—É –∑–∞–ø—Ä–æ—Å–æ–≤
- **OPTIMIZATION_SUMMARY.md** - –ø–æ–ª–Ω–æ–µ —Ä–µ–∑—é–º–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 16 —Ñ–µ–≤—Ä–∞–ª—è 2026
