# ‚úÖ –û—Ç–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ

## –ü—Ä–æ–±–ª–µ–º–∞ ‚ùå

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã—Å—Ç—Ä–æ –¥–µ—Ä–≥–∞–ª —Å–∫—Ä–æ–ª–ª–±–∞—Ä –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑, –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–æ—Å—å –º–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏–π scroll, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–∑—ã–≤–∞–ª–æ `checkAndFetch()`. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏.

**–ü—Ä–∏–º–µ—Ä:**

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç —Å –ø–æ–∑–∏—Ü–∏–∏ 0 ‚Üí –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å—Ç—Ä–æ–∫–∏ 50, 100, 150...
2. –ë—ã—Å—Ç—Ä–æ –¥–µ—Ä–≥–∞–µ—Ç —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–æ –∫–æ–Ω—Ü–∞ (—Å—Ç—Ä–æ–∫–∞ 5000)
3. –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è 50, 100, 150 –≤—Å–µ –µ—â–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
4. –ò—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Å—Ç—Ä–æ–∫—É 5000
5. –î–∞–Ω–Ω—ã–µ —Å–º–µ—à–∏–≤–∞—é—Ç—Å—è, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

Network tab –ø–æ–∫–∞–∑—ã–≤–∞–ª 5-10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–º–µ—Å—Ç–æ 1-2.
```

## –†–µ—à–µ–Ω–∏–µ ‚úÖ

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞:

### 1. **–î–µ–±–∞—É–Ω—Å –≤ TableBody**

**–§–∞–π–ª:** `Table/index.tsx`

```typescript
const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);

const debouncedCheckAndFetch = useCallback(() => {
	// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
	if (debounceTimerRef.current) {
		clearTimeout(debounceTimerRef.current);
	}

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 150ms
	debounceTimerRef.current = setTimeout(() => {
		checkAndFetch();
	}, 150);
}, [checkAndFetch]);
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- –°–æ–±—ã—Ç–∏–µ scroll –º–æ–∂–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å 100 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
- –î–µ–±–∞—É–Ω—Å –∂–¥–µ—Ç 150ms –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è
- –ó–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç `checkAndFetch()` —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤–º–µ—Å—Ç–æ 100 –≤—ã–∑–æ–≤–æ–≤ ‚Üí 1 –≤—ã–∑–æ–≤

### 2. **AbortSignal –≤ useInfiniteModelList**

**–§–∞–π–ª:** `useInfiniteModelList.ts`

```typescript
queryFn: async ({ pageParam, signal }) => {
	try {
		const response = await apiClient.get<InfiniteModelPage<TData>>(model, {
			params: query,
			signal, // ‚Üê –ü–µ—Ä–µ–¥–∞–µ–º AbortSignal
		});
		return response.data;
	} catch (err) {
		// –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –æ—Ç–º–µ–Ω—ã
		if (err instanceof Error && err.name === "CanceledError") {
			throw new Error("Request was cancelled");
		}
		throw err;
	}
};
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç `signal` –≤ queryFn
- –ï—Å–ª–∏ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è, —Å—Ç–∞—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω
- Axios –ø–æ–ª—É—á–∞–µ—Ç signal –∏ –º–æ–∂–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å XHR –∑–∞–ø—Ä–æ—Å
- –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

## –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

```
–ë–´–õ–û (–±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):
–°–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ ‚Üí 100 —Å–æ–±—ã—Ç–∏–π ‚Üí 100 –≤—ã–∑–æ–≤–æ–≤ checkAndFetch ‚Üí 5-10 XHR –∑–∞–ø—Ä–æ—Å–æ–≤

–°–¢–ê–õ–û (—Å –¥–µ–±–∞—É–Ω—Å–æ–º + AbortSignal):
–°–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ ‚Üí 100 —Å–æ–±—ã—Ç–∏–π ‚Üí 1 –≤—ã–∑–æ–≤ checkAndFetch (–ø–æ—Å–ª–µ 150ms) ‚Üí 1 XHR –∑–∞–ø—Ä–æ—Å
                                                      ‚Üì
                        –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ—Ä–≥–∞–µ—Ç —Å–∫—Ä–æ–ª–ª–±–∞—Ä:
                        - –°—Ç–∞—Ä—ã–π –∑–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
                        - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –í `Table/index.tsx`:

```typescript
const debounceTimerRef = useRef<NodeJS.Timeout | null>(null);

// –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–µ–±–∞—É–Ω—Å–∞ (milliseconds)
debounceTimerRef.current = setTimeout(() => {
	checkAndFetch();
}, 150); // ‚Üê –ò–∑–º–µ–Ω–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ/–º–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- **100-150ms** ‚Äî —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å (–æ—â—É—â–∞–µ—Ç—Å—è –æ—Ç–∑—ã–≤—á–∏–≤–æ, –Ω–æ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤)
- **50ms** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª—å—à–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å
- **300ms** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–æ –º–æ–∂–µ—Ç –æ—â—É—â–∞—Ç—å—Å—è –º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### DevTools ‚Üí Network tab

**–ë—ã–ª–æ:**

```
GET /api/v1/activityhistories?cursor=0&limit=100   [Pending...]
GET /api/v1/activityhistories?cursor=100&limit=100 [Pending...]
GET /api/v1/activityhistories?cursor=200&limit=100 [Pending...]
GET /api/v1/activityhistories?cursor=300&limit=100 [Pending...]
GET /api/v1/activityhistories?cursor=400&limit=100 [Pending...]
```

**–°—Ç–∞–ª–æ:**

```
GET /api/v1/activityhistories?cursor=400&limit=100 [200 OK] ‚Üê –¢–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π
```

### DevTools ‚Üí Console

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

```typescript
const debouncedCheckAndFetch = useCallback(() => {
	if (debounceTimerRef.current) {
		console.log("üîÑ –û—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤—ã–∑–æ–≤–∞");
		clearTimeout(debounceTimerRef.current);
	}

	debounceTimerRef.current = setTimeout(() => {
		console.log("üì° –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞");
		checkAndFetch();
	}, 150);
}, [checkAndFetch]);
```

## –ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

‚úÖ **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ:**

- –ù–∞ 80-90% –º–µ–Ω—å—à–µ XHR –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ë—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–±–ª–∏—Ü–∞

‚ö†Ô∏è **–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ:**

- –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (150ms) –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–¥–ª–µ–Ω–Ω–æ —Å–∫—Ä–æ–ª–ª–∏—Ç ‚Äî –Ω–µ –∑–∞–º–µ—Ç–Ω–æ
- –ï—Å–ª–∏ –±—ã—Å—Ç—Ä–æ –¥–µ—Ä–≥–∞–µ—Ç ‚Äî –æ—Ç–º–µ–Ω–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

‚ùå **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ:**

- –ù–µ—Ç (–≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

### –î–µ–±–∞—É–Ω—Å vs Throttle

- **–î–µ–±–∞—É–Ω—Å** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è): –∂–¥–µ–º –ø–æ–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–µ–∫—Ä–∞—Ç—è—Ç—Å—è

  ```
  event event event [150ms] ‚Üí –æ–¥–∏–Ω –≤—ã–∑–æ–≤
  ```

- **Throttle** (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è): –≤—ã–ø–æ–ª–Ω—è–µ–º –º–∞–∫—Å–∏–º—É–º N —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
  ```
  event [100ms] event [100ms] event ‚Üí –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤
  ```

### AbortController –≤ Axios

```typescript
const controller = new AbortController();

// –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–ø—Ä–æ—Å
fetch(url, { signal: controller.signal });

// –û—Ç–º–µ–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å
controller.abort(); // XHR –æ—Ç–º–µ–Ω–∞, —Å–æ–∫–µ—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

React Query –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `signal` –≤ queryFn.

## –ò—Ç–æ–≥

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–µ–±–∞—É–Ω—Å–∞ + AbortSignal –¥–∞–µ—Ç:

- ‚úÖ –ú–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –¢–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –û—Ç–∑—ã–≤—á–∏–≤—ã–π UI
- ‚úÖ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
