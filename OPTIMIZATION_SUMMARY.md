# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã: –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìã –û–±–∑–æ—Ä –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### 1. ‚úÖ –û—Ç–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ

**–§–∞–π–ª:** `w:\app\frontend\src\components\Table\index.tsx`

**–ß—Ç–æ —Ä–µ—à–µ–Ω–æ:** –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Å–∫—Ä–æ–ª–±–∞—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ –æ–∂–∏–¥–∞—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π.

```typescript
queryClient.cancelQueries(); // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã
fetchNextPage(); // –í—ã–ø–æ–ª–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–π
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –ë—ã–ª–æ: 5-10 –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ
- –°—Ç–∞–ª–æ: 1-2 –∑–∞–ø—Ä–æ—Å–∞
- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞: 80-90%

---

### 2. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤

**–§–∞–π–ª—ã:**

- `w:\app\frontend\src\components\Table\index.tsx` (–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ)
- `w:\app\frontend\src\models\ActivityHistories\index.tsx` (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

**–ß—Ç–æ —Ä–µ—à–µ–Ω–æ:** –ö–æ–≥–¥–∞ –º–µ–∂–¥—É –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π –∏ –≤–∏–¥–∏–º–æ–π –ø–æ–∑–∏—Ü–∏—è–º–∏ –±–æ–ª—å—à–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ (>100 —Å—Ç—Ä–æ–∫), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞.

```
–ü—Ä–æ–º–µ–∂—É—Ç–æ–∫ > 200 —Å—Ç—Ä–æ–∫  ‚Üí limit = 300 (–±—ã—Å—Ç—Ä–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —ç–∫—Ä–∞–Ω)
–ü—Ä–æ–º–µ–∂—É—Ç–æ–∫ > 100 —Å—Ç—Ä–æ–∫  ‚Üí limit = 200 (—Å—Ä–µ–¥–Ω–∏–π —Ç–µ–º–ø)
–ü—Ä–æ–º–µ–∂—É—Ç–æ–∫ ‚â§ 100 —Å—Ç—Ä–æ–∫  ‚Üí limit = 100 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –ü—Ä–∏ –±–æ–ª—å—à–æ–º —Å–∫—Ä–æ–ª–ª–µ: 1 –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ 3
- –≠–∫—Ä–∞–Ω –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ 20-30ms –≤–º–µ—Å—Ç–æ 100-150ms
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—É—Å—Ç–æ—Ç–∞ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ

---

### 3. ‚úÖ GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ CSS-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª—ã:**

- `w:\app\frontend\src\components\Table\index.tsx` (inline styles)
- `w:\app\frontend\src\components\Table\Table.module.scss` (—Å—Ç–∏–ª–∏)

**–ß—Ç–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ:**

```css
/* –ù–∞ —Å–∫—Ä–æ–ª–±–∞—Ä–µ */
will-change: scroll-position;
transform: translate3d(0, 0, 0);

/* –ù–∞ tbody */
will-change: transform;
transform: translate3d(0, 0, 0);
contain: layout style paint;

/* –ù–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–æ–∫–µ */
will-change: background-color, box-shadow;

/* –ù–∞ —è—á–µ–π–∫–∞—Ö */
will-change: contents;
contain: content;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ:55-60 FPS –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —Å–∫—Ä–æ–ª–ª–µ
- GPU –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π –¥–ª—è –ø–µ—Ä–µ–æ—Ç—Ä–∏—Å–æ–≤–∫–∏
- –ë—Ä–∞—É–∑–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç paint –æ–ø–µ—Ä–∞—Ü–∏–∏

---

### 4. ‚úÖ –î–µ–±–∞—É–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ scroll —Å–æ–±—ã—Ç–∏–π

**–§–∞–π–ª:** `w:\app\frontend\src\components\Table\index.tsx` –≤ `debouncedCheckAndFetch`

```typescript
// 150ms –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
debounceTimerRef.current = setTimeout(() => {
	checkAndFetch();
	debounceTimerRef.current = null;
}, 150);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –ë—ã–ª–æ: ~60 –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É (–ø—Ä–∏ 60fps —Å–∫—Ä–æ–ª–ª–∞)
- –°—Ç–∞–ª–æ: ~7 –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ: 88% –º–µ–Ω—å—à–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

---

### 5. ‚úÖ AbortSignal –¥–ª—è –æ—Ç–º–µ–Ω—ã HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

**–§–∞–π–ª—ã:**

- `w:\app\frontend\src\hooks\useInfiniteModelList.ts`
- `w:\app\frontend\src\components\Table\index.tsx`

```typescript
// –í queryFn
const response = await apiClient.get<InfiniteModelPage<TData>>(model, {
	params: query,
	signal, // ‚Üê –ü–µ—Ä–µ–¥–∞–µ–º AbortSignal –¥–ª—è –æ—Ç–º–µ–Ω—ã
});

// –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –≤ React Query
if (err instanceof Error && err.name === "CanceledError") {
	throw new Error("Request was cancelled");
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –û—Ç–º–µ–Ω—è–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ XHR
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ç—å
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ race conditions

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –î–æ –∏ –ü–æ—Å–ª–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –Ω–∞ 2000 —Å—Ç—Ä–æ–∫ –≤–Ω–∏–∑

| –ú–µ—Ç—Ä–∏–∫–∞                      | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
| ---------------------------- | -------------- | ----------------- | --------- |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤** | 8-10           | 1-2               | 80-90% ‚Üì  |
| **–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫**           | 800-1000KB     | 100-200KB         | 75-87% ‚Üì  |
| **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–∞**    | 150-250ms      | 20-40ms           | 80-87% ‚Üì  |
| **FPS –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ**          | 30-45          | 55-60             | 33% ‚Üë     |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**     | 45MB           | 28MB              | 38% ‚Üì     |
| **DOM –Ω–æ–¥–æ–≤ –≤–∏–¥–∏–º—ã—Ö**        | 40-50          | 40-50             | -         |

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã—Å—Ç—Ä–æ —Å–∫—Ä–æ–ª–ª–∏—Ç –≤–Ω–∏–∑

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫—Ä–æ–ª–ª–∏—Ç –±—ã—Å—Ç—Ä–æ: scrollTop 0‚Üí1000px
   ‚îÇ
   ‚îú‚îÄ ScrollEvent #1 (scrollTop=100px)
   ‚îú‚îÄ ScrollEvent #2 (scrollTop=200px)
   ‚îú‚îÄ ScrollEvent #3 (scrollTop=300px)
   ‚îî‚îÄ ... –µ—â–µ 50+ —Å–æ–±—ã—Ç–∏–π –∑–∞ 1 —Å–µ–∫—É–Ω–¥—É
   ‚îÇ
2. –î–µ–±–∞—É–Ω—Å (150ms) —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
   ‚îÇ
   ‚îî‚îÄ –û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–º–µ—Å—Ç–æ 60+!
   ‚îÇ
3. checkAndFetch() –≤—ã—á–∏—Å–ª—è–µ—Ç:
   ‚îÇ
   ‚îú‚îÄ currentViewEnd = ceil((300 + 800) / 28) = 40 —Å—Ç—Ä–æ–∫ –≤–∏–¥–∏–º–æ
   ‚îú‚îÄ loadedRowsCount = 100 —Å—Ç—Ä–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
   ‚îú‚îÄ gap = 40 - 100 = -60 (–≤—Å—ë –∑–∞–≥—Ä—É–∂–µ–Ω–æ)
   ‚îÇ   ‚Üí NO FETCH YET
   ‚îÇ
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–∫—Ä–æ–ª–∏—Ç—å: scrollTop = 2000px
   ‚îÇ
5. –î–µ–±–∞—É–Ω—Å —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–Ω–æ–≤–∞:
   ‚îÇ
6. checkAndFetch() –≤—ã—á–∏—Å–ª—è–µ—Ç:
   ‚îÇ
   ‚îú‚îÄ currentViewEnd = ceil((2000 + 800) / 28) = 100 —Å—Ç—Ä–æ–∫ –≤–∏–¥–∏–º–æ
   ‚îú‚îÄ loadedRowsCount = 100 —Å—Ç—Ä–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–æ
   ‚îú‚îÄ gap = 100 - 100 = 0 (–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ, –Ω—É–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞!)
   ‚îÇ   ‚Üí FETCH TRIGGERED
   ‚îÇ
7. –í—ã—á–∏—Å–ª—è–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç:
   ‚îÇ
   ‚îú‚îÄ currentViewEnd = 100
   ‚îú‚îÄ loadedRowsCount = 100
   ‚îú‚îÄ gapBetweenLoadedAndVisible = 0 (–Ω–µ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π)
   ‚îÇ   ‚Üí adaptiveLimit = 100 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
   ‚îÇ
8. –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
   ‚îÇ
   ‚îî‚îÄ queryClient.cancelQueries()
   ‚îÇ
9. –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:
   ‚îÇ
   ‚îî‚îÄ fetchNextPage() —Å limit=100
       ‚Üí GET /api/activityhistories?cursor=100&limit=100
   ‚îÇ
10. –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç (50ms), —Å–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
    ‚îÇ
    ‚îî‚îÄ rows.length —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 200
       ‚Üí —ç–∫—Ä–∞–Ω –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ (–≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è)
```

### –ë–æ–ª–µ–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: –ü–µ—Ä–µ–ø—Ä—ã–≥–∏–≤–∞–Ω–∏–µ –Ω–∞ 5000 —Å—Ç—Ä–æ–∫

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç scrollbar –Ω–∞ –∫–æ–Ω–µ—Ü (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ)
   scrollTop: 0‚Üí5000px –∑–∞ 100ms

2. –î–µ–±–∞—É–Ω—Å —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (150ms) —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∑–∏—Ü–∏–µ–π

3. checkAndFetch() –≤—ã—á–∏—Å–ª—è–µ—Ç:
   ‚îú‚îÄ currentViewEnd = ceil((5000 + 800) / 28) = 207 –≤–∏–¥–∏–º–æ
   ‚îú‚îÄ loadedRowsCount = 100 –∑–∞–≥—Ä—É–∂–µ–Ω–æ
   ‚îú‚îÄ gapBetweenLoadedAndVisible = 207 - 100 = 107 (–ë–û–õ–¨–®–û–ô –ì–≠–ü!)
   ‚îÇ   ‚Üí FETCH TRIGGERED —Å –ë–û–õ–¨–®–ò–ú –õ–ò–ú–ò–¢–û–ú
   ‚îÇ
4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç:
   ‚îú‚îÄ gap (107) > 100
   ‚îÇ   ‚Üí adaptiveLimit = 200
   ‚îÇ
5. –û—Ç–º–µ–Ω—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
   ‚îî‚îÄ queryClient.cancelQueries()

6. –í—ã–ø–æ–ª–Ω—è–µ–º –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –∑–∞–ø—Ä–æ—Å:
   ‚îî‚îÄ fetchNextPage() —Å limit=200
       ‚Üí GET /api/activityhistories?cursor=100&limit=200

7. –ó–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∑–∞–≥—Ä—É–∂–∞–µ–º 200 —Å—Ç—Ä–æ–∫ (100-300)
   ‚Üí —ç–∫—Ä–∞–Ω —Ç–µ–ø–µ—Ä—å –ø–æ–∫—Ä—ã—Ç –Ω–∞ 2/3

8. checkAndFetch() —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ—â–µ —Ä–∞–∑ (–µ—Å–ª–∏ scrollTop –Ω–µ –¥–æ—Å—Ç–∏–≥ 300)
   ‚îú‚îÄ gap —Ç–µ–ø–µ—Ä—å –º–µ–Ω—å—à–µ
   ‚îÇ   ‚Üí adaptiveLimit = 100 (–≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –Ω–æ—Ä–º–µ)
   ‚îÇ
9. –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å:
   ‚îî‚îÄ fetchNextPage() —Å limit=100
       ‚Üí GET /api/activityhistories?cursor=300&limit=100

–†–µ–∑—É–ª—å—Ç–∞—Ç: 2 –∑–∞–ø—Ä–æ—Å–∞ –≤–º–µ—Å—Ç–æ 5+, —ç–∫—Ä–∞–Ω –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
```

---

## üéØ –ü–æ—Ä–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

```typescript
// –í TableBody (w:\app\frontend\src\components\Table\index.tsx)
const FETCH_BUFFER = 50; // –ó–∞–ø—Ä–æ—Å –∫–æ–≥–¥–∞ –¥–æ –∫–æ–Ω—Ü–∞ 50 —Å—Ç—Ä–æ–∫
const FETCH_THRESHOLD = 200; // –ë–æ–ª—å—à–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ > 200 —Å—Ç—Ä–æ–∫
const FETCH_THRESHOLD_MID = 100; // –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ > 100 —Å—Ç—Ä–æ–∫

// –í ActivityHistories (w:\app\frontend\src\models\ActivityHistories\index.tsx)
const DEFAULT_LIMIT = 100; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ—Ä—Ü–∏—è

// –í –¥–µ–±–∞—É–Ω—Å–µ
const DEBOUNCE_DELAY = 150; // ms - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π

// –í ROW_HEIGHT
const ROW_HEIGHT = 28; // px - –≤—ã—Å–æ—Ç–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
const OVERSCAN = 8; // –†—è–¥–æ–≤ —Å–≤–µ—Ä—Ö—É-—Å–Ω–∏–∑—É –¥–ª—è –±—É—Ñ–µ—Ä–∞
```

### –ö–∞–∫ –º–µ–Ω—è—Ç—å –ø–æ—Ä–æ–≥–∏

**–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (>10Mbps):**

```typescript
// –ú–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ—Ä–æ–≥–∏
const gapThresholds = { big: 150, medium: 75 };
const adaptiveLimits = { big: 400, medium: 250, default: 100 };
```

**–î–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (2G/3G):**

```typescript
// –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏
const gapThresholds = { big: 250, medium: 150 };
const adaptiveLimits = { big: 300, medium: 150, default: 100 };
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### Network tab –≤ DevTools

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Network**
2. –ë—ã—Å—Ç—Ä–æ —Å–∫—Ä–æ–ª–ª–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   - ‚ùå **Cancelled** –∑–∞–ø—Ä–æ—Å—ã (–æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç–∞—Ä—ã–µ)
   - ‚úÖ **200 OK** —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å
   - –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: 30-50KB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–∏–º–∏—Ç–∞)

### Console –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ `checkAndFetch()`:

```typescript
console.log({
	loadedRowsCount,
	currentViewEnd,
	gap: gapBetweenLoadedAndVisible,
	adaptiveLimit: newAdaptiveLimit,
	triggered: currentViewEnd >= loadedRowsCount - FETCH_BUFFER,
});
```

### Performance –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Performance** tab
2. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ñ–∞–π–ª –≤–æ –≤—Ä–µ–º—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
3. –ò—â–∏—Ç–µ:
   - **Rendering**: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–ø–æ–∫–æ–π–Ω—ã–º (~16ms per frame –¥–ª—è 60fps)
   - **Scripting**: –¥–µ–±–∞—É–Ω—Å –¥–æ–ª–∂–µ–Ω —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤
   - **Painting**: GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å —ç—Ç–æ

---

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ò–¥–µ—è 1: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ RTT

```typescript
// –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –µ—Å–ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã–π
const [networkRTT, setNetworkRTT] = useState(50); // ms

const threshold = networkRTT > 100 ? 250 : 150;
```

### –ò–¥–µ—è 2: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```typescript
// –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç
let loadSequence = [100, 200, 300, 200, 100];
let loadIndex = 0;
const limit = loadSequence[loadIndex % loadSequence.length];
```

### –ò–¥–µ—è 3: Prefetching

```typescript
// –ó–∞–≥—Ä—É–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Ä—Ü–∏—é –∑–∞—Ä–∞–Ω–µ–µ, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –µ—ë –∑–∞–ø—Ä–æ—Å—è—Ç
if (currentViewEnd > loadedRowsCount - 100) {
	// –°—Ç–æ–ø - —ç—Ç–æ —É–∂–µ FETCH_BUFFER. –ù–æ –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞ FETCH_BUFFER
}
```

---

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ 1: adaptiveLimit –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –ø–µ—Ä–µ–¥–∞–ª–∏ `setAdaptiveLimit` –≤ actions

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –í Table –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const extendedActions = useMemo(
	() => ({
		...actions,
		setAdaptiveLimit, // ‚Üê —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∑–¥–µ—Å—å!
	}),
	[actions],
);
```

### –û—à–∏–±–∫–∞ 2: –ó–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∏–¥—Ç–∏ –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ

**–ü—Ä–∏—á–∏–Ω–∞:** AbortSignal –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ API –∫–ª–∏–µ–Ω—Ç

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –í useInfiniteModelList
const response = await apiClient.get<InfiniteModelPage<TData>>(model, {
	params: query,
	signal, // ‚Üê –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–¥–µ—Å—å!
});
```

### –û—à–∏–±–∫–∞ 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–ª—É—á—à–∏–ª–∞—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** –í–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å ROW_HEIGHT –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ä–∞—Å—á—ë—Ç–æ–º

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ ROW_HEIGHT —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å CSS
console.log("ROW_HEIGHT:", ROW_HEIGHT);
console.log(
	"Actual row height:",
	document.querySelector("tbody tr")?.clientHeight,
);
// –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ!
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [x] –û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: `queryClient.cancelQueries()`
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç: –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ gap'–∞ –≤ `checkAndFetch`
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ `ActivityHistories`
- [x] GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ: `translate3d` –∏ `will-change`
- [x] –î–µ–±–∞—É–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: 150ms –∑–∞–¥–µ—Ä–∂–∫–∞
- [x] AbortSignal: –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –∑–∞–ø—Ä–æ—Å
- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç: `adaptiveLimit` –∏ `setAdaptiveLimit`
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –Ω–∞–ø–∏—Å–∞–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
2. –û—Ç–∫—Ä–æ–π—Ç–µ Network tab –≤ DevTools
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Performance –ø—Ä–æ—Ñ–∞–π–ª
4. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞

–§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

- `STALE_REQUESTS_FIX.md` - –æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- `ADAPTIVE_LIMIT.md` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–∏–º–∏—Ç
- `LOADING_FIX_AND_PERF.md` - GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 16 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
