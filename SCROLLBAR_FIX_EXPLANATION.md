# üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞

## –ü—Ä–æ–±–ª–µ–º–∞ ‚ùå

–°–∫—Ä–æ–ª–ª–±–∞—Ä –±—ã–ª –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö (`rows.length`), –∞ –Ω–µ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫–∞—Ö –≤ –ë–î (`total`).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –ó–∞–≥—Ä—É–∂–µ–Ω–æ 100 –∏–∑ 5000 —Å—Ç—Ä–æ–∫
- –°–∫—Ä–æ–ª–ª–±–∞—Ä –±—ã–ª –æ–≥—Ä–æ–º–Ω—ã–π (–∫–∞–∫ –±—É–¥—Ç–æ –≤—Å–µ–≥–æ 100 —Å—Ç—Ä–æ–∫)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø—Ä–æ–ø–æ—Ä—Ü–∏—é

## –†–µ—à–µ–Ω–∏–µ ‚úÖ

–°–∫—Ä–æ–ª–ª–±–∞—Ä —Ç–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ `total` (–≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ –ë–î).

```
–ë–´–õ–û:                          –°–¢–ê–õ–û:
topPadding = index * 28        topPaddingAll = index * 28
                               (–Ω–∞ –í–°–ï–• 5000 —Å—Ç—Ä–æ–∫)
bottomPadding = (rows - idx)*28  bottomPaddingAll = (total - idx) * 28
(—Ç–æ–ª—å–∫–æ –Ω–∞ 100 –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö)    (–Ω–∞ –í–°–ï–• 5000 —Å—Ç—Ä–æ–∫)
```

## –ö–∞–∫ —ç—Ç–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—ã—Å–æ—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü—Ä–∏–º–µ—Ä: 5000 —Å—Ç—Ä–æ–∫ –≤ –ë–î, –∑–∞–≥—Ä—É–∂–µ–Ω–æ 300

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):                 ‚îÇ
‚îÇ - –í–∏–¥–∏–º—ã–µ: 37 —Å—Ç—Ä–æ–∫ √ó 28px = 1036  ‚îÇ
‚îÇ - Padding —Å–Ω–∏–∑—É: 263 √ó 28 = 7364   ‚îÇ
‚îÇ - –ò–¢–û–ì–û: ~8400px                   ‚îÇ
‚îÇ - –°–∫—Ä–æ–ª–ª–±–∞—Ä: 600/8400 ‚âà 7% (–û–ì–†–û–ú–ù–´–ô!)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–ï–ô–ß–ê–° (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):                  ‚îÇ
‚îÇ - Padding —Å–≤–µ—Ä—Ö—É: 45 √ó 28 = 1260    ‚îÇ
‚îÇ - –í–∏–¥–∏–º—ã–µ: 37 √ó 28 = 1036           ‚îÇ
‚îÇ - Padding —Å–Ω–∏–∑—É: 4918 √ó 28 = 137504 ‚îÇ
‚îÇ - –ò–¢–û–ì–û: 139800px                    ‚îÇ
‚îÇ - –°–∫—Ä–æ–ª–ª–±–∞—Ä: 600/139800 ‚âà 0.4% (–º–∞–ª–µ–Ω—å–∫–∏–π!)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `TableBody`

### –ë—ã–ª–æ:

```typescript
const startIndex = Math.floor(scrollTop / ROW_HEIGHT) - OVERSCAN;
const endIndex = Math.min(
	rows.length, // ‚Üê –ù–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ!
	Math.ceil((scrollTop + containerHeight) / ROW_HEIGHT) + OVERSCAN,
);

const topPadding = startIndex * ROW_HEIGHT;
const bottomPadding = Math.max(0, (rows.length - endIndex) * ROW_HEIGHT);
```

### –°—Ç–∞–ª–æ:

```typescript
const startIndexVirtual = Math.floor(scrollTop / ROW_HEIGHT) - OVERSCAN;
const endIndexVirtual = Math.min(
	total, // ‚Üê –ù–∞ –í–°–ï —Å—Ç—Ä–æ–∫–∏ –≤ –ë–î!
	Math.ceil((scrollTop + containerHeight) / ROW_HEIGHT) + OVERSCAN,
);

const topPaddingAll = startIndexVirtual * ROW_HEIGHT;
const bottomPaddingAll = Math.max(0, (total - endIndexVirtual) * ROW_HEIGHT);

// –§–∏–ª—å—Ç—Ä—É–µ–º –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ
const visibleRows = rows.filter(
	(_row, idx) => idx >= startIndexVirtual && idx < endIndexVirtual,
);
```

## –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **`startIndexVirtual` –∏ `endIndexVirtual`** ‚Äî –∏–Ω–¥–µ–∫—Å—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –í–°–ï–• —Å—Ç—Ä–æ–∫ (0-5000)
2. **`topPaddingAll` –∏ `bottomPaddingAll`** ‚Äî –≤—ã—Å–æ—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –í–°–ï–• —Å—Ç—Ä–æ–∫
3. **`visibleRows`** ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ–º –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –≤ viewport
4. **Scroll –≤—ã—Å–æ—Ç–∞** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —á–µ—Ä–µ–∑ padding –Ω–∞ –ø–æ–ª–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools:

```html
<tbody>
	<!-- –ù–µ–≤–∏–¥–∏–º—ã–µ —Å—Ç—Ä–æ–∫–∏ 0-44 -->
	<tr>
		<td height="1260px" border="0"></td>
	</tr>

	<!-- –í–∏–¥–∏–º—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ -->
	<tr>
		...
	</tr>
	<tr>
		...
	</tr>
	... (37 —Å—Ç—Ä–æ–∫)

	<!-- –ù–µ–≤–∏–¥–∏–º—ã–µ —Å—Ç—Ä–æ–∫–∏ 82-5000 -->
	<tr>
		<td height="137504px" border="0"></td>
	</tr>
</tbody>
```

**–°–∫—Ä–æ–ª–ª–±–∞—Ä —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ 5000 —Å—Ç—Ä–æ–∫–∞–º, –∞ –Ω–µ 300!** üéâ
